<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëœë¤ ë¹„ë°€ë²ˆí˜¸ ìƒì„±ê¸°</title>
    <!-- Tailwind CSS ë¡œë“œ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter í°íŠ¸ ì„¤ì • -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        /* 1. CSS ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ìƒ‰ìƒ ì •ì˜ */
        :root {
            /* ë¼ì´íŠ¸ í…Œë§ˆ (ê¸°ë³¸ê°’) */
            --color-bg: #f0f4f8;
            --color-card-bg: #ffffff;
            --color-text-main: #1f2937;
            --color-text-sub: #6b7280;
            --color-input-bg: #f3f4f6;
            --color-nav-bg: #e5e7eb;
            --color-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        [data-theme="dark"] {
            /* ë‹¤í¬ í…Œë§ˆ ì˜¤ë²„ë¼ì´ë“œ */
            --color-bg: #0d1117;
            --color-card-bg: #161b22;
            --color-text-main: #ffffff;
            --color-text-sub: #9ca3af;
            --color-input-bg: #374151;
            --color-nav-bg: #1f2937;
            --color-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-bg); /* ë°°ê²½ìƒ‰ ì ìš© */
            color: var(--color-text-main); /* ê¸°ë³¸ í…ìŠ¤íŠ¸ ìƒ‰ìƒ ì ìš© */
            transition: background-color 0.3s;
        }

        /* ì»¤ìŠ¤í…€ í´ë˜ìŠ¤ë¥¼ Tailwind í´ë˜ìŠ¤ì²˜ëŸ¼ ì‚¬ìš© */
        .theme-card-bg { background-color: var(--color-card-bg); }
        .theme-nav-bg { background-color: var(--color-nav-bg); }
        .theme-input-bg { background-color: var(--color-input-bg); }
        .theme-text-main { color: var(--color-text-main); }
        .theme-text-sub { color: var(--color-text-sub); }
        .theme-shadow { box-shadow: var(--color-shadow); }

        /* í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ (alert ëŒ€ì‹  ì‚¬ìš©) */
        .toast {
            transition: opacity 0.3s ease-in-out;
            opacity: 0;
            pointer-events: none;
        }
        .toast.show {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>
<body data-theme="dark">

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="min-h-screen flex items-center justify-center p-4">
        <div class="w-full max-w-xl rounded-2xl theme-card-bg theme-shadow p-6 md:p-8 transition duration-300">
            
            <!-- ì œëª© ë° í…Œë§ˆ í† ê¸€ -->
            <div class="flex items-center justify-between mb-6">
                <h1 class="text-3xl font-extrabold theme-text-main flex-1 text-center">ğŸ”‘ ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±ê¸°</h1>
                <button id="theme-toggle" onclick="toggleTheme()" 
                        class="p-2 rounded-full theme-nav-bg theme-text-main hover:opacity-80 transition duration-200 ml-4">
                    <!-- ë‹¬ ì•„ì´ì½˜ (ë‹¤í¬ ëª¨ë“œ ìƒíƒœì¼ ë•Œ ë³´ì„) -->
                    <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                    <!-- í•´ ì•„ì´ì½˜ (ë¼ì´íŠ¸ ëª¨ë“œ ìƒíƒœì¼ ë•Œ ë³´ì„) -->
                    <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </button>
            </div>
            
            <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="flex space-x-2 p-1 theme-nav-bg rounded-full mb-6 transition duration-300">
                <button id="tab-pin" onclick="switchTab('pin')" 
                        class="tab-btn flex-1 py-2 text-sm font-semibold rounded-full transition duration-300 bg-indigo-600 text-white shadow-md">
                    6ìë¦¬ ìˆ«ì (OTP/PIN)
                </button>
                <button id="tab-general" onclick="switchTab('general')" 
                        class="tab-btn flex-1 py-2 text-sm font-semibold rounded-full transition duration-300 theme-text-sub hover:bg-gray-400/50">
                    ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸
                </button>
            </div>
            
            <!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ (ë³µì‚¬ ì™„ë£Œ ì•Œë¦¼) -->
            <div id="toast" class="toast fixed top-5 left-1/2 transform -translate-x-1/2 px-4 py-2 bg-green-500 text-white rounded-lg shadow-lg z-50">
                ë³µì‚¬ ì™„ë£Œ!
            </div>

            <!-- 1. 6ìë¦¬ ìˆ«ì ìƒì„± íƒ­ ë‚´ìš© -->
            <div id="pin-tab" class="tab-content space-y-6">
                <p class="theme-text-sub text-center">ì„ì‹œ ë¹„ë°€ë²ˆí˜¸ë‚˜ ì¸ì¦ ë²ˆí˜¸ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ 6ìë¦¬ ìˆ«ìë¥¼ ìƒì„±í•©ë‹ˆë‹¤.</p>
                
                <!-- ì¶œë ¥ ì˜ì—­ -->
                <div class="flex items-center space-x-3 theme-input-bg rounded-xl p-4 transition duration-300">
                    <input type="text" id="pin-output" readonly value="______" 
                           class="flex-grow bg-transparent text-3xl font-mono tracking-widest text-indigo-500 border-none outline-none caret-transparent select-all">
                    <button onclick="generate6DigitPin()" 
                            class="p-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl transition duration-200 shadow-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m-15.356-2A8.001 8.001 0 0019.418 15m0 0H15" />
                        </svg>
                    </button>
                </div>
                
                <!-- ë³µì‚¬ ë²„íŠ¼ -->
                <button onclick="copyPin()" 
                        class="w-full py-3 bg-indigo-500 hover:bg-indigo-400 text-white font-bold rounded-xl transition duration-200">
                    í´ë¦½ë³´ë“œì— ë³µì‚¬í•˜ê¸°
                </button>
            </div>
            
            <!-- 2. ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸ ìƒì„± íƒ­ ë‚´ìš© -->
            <div id="general-tab" class="tab-content space-y-6 hidden">
                <p class="theme-text-sub text-center">ëŒ€ì†Œë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ìë¥¼ ì¡°í•©í•œ ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ë§Œë“œì„¸ìš”.</p>

                <!-- ì¶œë ¥ ì˜ì—­ -->
                <div class="flex flex-col space-y-2 theme-input-bg rounded-xl p-4 transition duration-300">
                    <input type="text" id="password-output" readonly value="P@$$wOrd123!" 
                           class="flex-grow bg-transparent text-xl font-mono text-indigo-500 border-none outline-none caret-transparent select-all">
                    <div id="strength-meter" class="h-2 rounded-full theme-nav-bg">
                        <div id="strength-bar" class="h-full rounded-full transition-all duration-300" style="width: 50%; background-color: #f59e0b;"></div>
                    </div>
                    <p id="strength-text" class="text-right text-sm text-yellow-500 font-semibold">ë³´í†µ</p>
                </div>

                <!-- ì„¤ì • ì˜µì…˜ -->
                <div class="space-y-4 theme-input-bg p-5 rounded-xl transition duration-300">
                    
                    <!-- ê¸¸ì´ ì„¤ì • -->
                    <div class="flex flex-col">
                        <label for="length" class="theme-text-main font-semibold mb-2">ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´: <span id="length-value" class="text-indigo-500">12</span></label>
                        <input type="range" id="length" min="4" max="32" value="12" 
                               class="w-full h-2 theme-nav-bg rounded-lg appearance-none cursor-pointer range-lg"
                               oninput="document.getElementById('length-value').innerText = this.value; generatePassword()">
                    </div>

                    <!-- í¬í•¨í•  ë¬¸ì ìœ í˜• -->
                    <div class="grid grid-cols-2 gap-3">
                        <label class="flex items-center theme-text-main">
                            <input type="checkbox" id="include-uppercase" checked class="form-checkbox h-5 w-5 text-indigo-600 bg-gray-600 border-gray-500 rounded focus:ring-indigo-500" onchange="generatePassword()">
                            <span class="ml-2">ëŒ€ë¬¸ì (A-Z)</span>
                        </label>
                        <label class="flex items-center theme-text-main">
                            <input type="checkbox" id="include-lowercase" checked class="form-checkbox h-5 w-5 text-indigo-600 bg-gray-600 border-gray-500 rounded focus:ring-indigo-500" onchange="generatePassword()">
                            <span class="ml-2">ì†Œë¬¸ì (a-z)</span>
                        </label>
                        <label class="flex items-center theme-text-main">
                            <input type="checkbox" id="include-numbers" checked class="form-checkbox h-5 w-5 text-indigo-600 bg-gray-600 border-gray-500 rounded focus:ring-indigo-500" onchange="generatePassword()">
                            <span class="ml-2">ìˆ«ì (0-9)</span>
                        </label>
                        <label class="flex items-center theme-text-main">
                            <input type="checkbox" id="include-symbols" checked class="form-checkbox h-5 w-5 text-indigo-600 bg-gray-600 border-gray-500 rounded focus:ring-indigo-500" onchange="generatePassword()">
                            <span class="ml-2">íŠ¹ìˆ˜ë¬¸ì (!@#$)</span>
                        </label>
                    </div>
                    
                    <!-- ë²„íŠ¼ ê·¸ë£¹: ì¬ìƒì„± ë° ë³µì‚¬ -->
                    <div class="flex space-x-3">
                        <button onclick="generatePassword()" 
                                class="flex-1 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl transition duration-200 shadow-lg">
                            ì¬ìƒì„±
                        </button>
                        <button onclick="copyGeneralPassword()" 
                                class="flex-1 py-3 theme-nav-bg text-gray-700 dark:text-gray-300 font-bold rounded-xl transition duration-200 hover:opacity-80 shadow-lg">
                            í´ë¦½ë³´ë“œì— ë³µì‚¬í•˜ê¸°
                        </button>
                    </div>

                </div>

            </div>
            
        </div>
    </div>

    <script>
        // ìƒìˆ˜ ì •ì˜
        const UPPERCASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const LOWERCASE_CHARS = 'abcdefghijklmnopqrstuvwxyz';
        const NUMBER_CHARS = '0123456789';
        const SYMBOL_CHARS = '!@#$%^&*()_+[]{}|;:,.<>?';
        const THEME_KEY = 'password-generator-theme'; // í…Œë§ˆ ì €ì¥ì„ ìœ„í•œ í‚¤

        // ----------------- UI/UX í•¨ìˆ˜ -----------------

        /**
         * alert ëŒ€ì‹  ì‚¬ìš©í•  ì„ì‹œ ì•Œë¦¼ ë©”ì‹œì§€ (Toast) í‘œì‹œ
         * @param {string} message - í‘œì‹œí•  ë©”ì‹œì§€
         */
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            // í† ìŠ¤íŠ¸ ë°°ê²½ìƒ‰ì„ ë¼ì´íŠ¸ ëª¨ë“œì—ì„œë„ ì˜ ë³´ì´ë„ë¡ ê³ ì •
            toast.classList.add('bg-green-500', 'text-white');
            toast.classList.add('show');
            
            // 2ì´ˆ í›„ ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        /**
         * í´ë¦½ë³´ë“œì— í…ìŠ¤íŠ¸ë¥¼ ë³µì‚¬í•˜ê³  í† ìŠ¤íŠ¸ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
         * @param {string} text - ë³µì‚¬í•  í…ìŠ¤íŠ¸
         */
        function copyToClipboard(text) {
            const tempInput = document.createElement('textarea');
            tempInput.value = text;
            document.body.appendChild(tempInput);
            tempInput.select();
            
            try {
                // document.execCommand('copy')ëŠ” Iframe í™˜ê²½ì—ì„œ í´ë¦½ë³´ë“œ ë³µì‚¬ë¥¼ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.
                document.execCommand('copy'); 
                showToast('ë³µì‚¬ ì™„ë£Œ!');
            } catch (err) {
                console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                showToast('ë³µì‚¬ ì‹¤íŒ¨! (ì½˜ì†” í™•ì¸)');
            }
            
            document.body.removeChild(tempInput);
        }
        
        // ----------------- í…Œë§ˆ ì „í™˜ ë¡œì§ -----------------

        /**
         * í…Œë§ˆë¥¼ ì ìš©í•˜ê³  LocalStorageì— ì €ì¥í•©ë‹ˆë‹¤.
         * @param {string} theme - 'dark' ë˜ëŠ” 'light'
         */
        function applyTheme(theme) {
            const body = document.body;
            const sunIcon = document.getElementById('sun-icon');
            const moonIcon = document.getElementById('moon-icon');

            body.setAttribute('data-theme', theme);
            
            const isDark = theme === 'dark';
            
            // ì•„ì´ì½˜ ê°€ì‹œì„± í† ê¸€
            moonIcon.classList.toggle('hidden', !isDark);
            sunIcon.classList.toggle('hidden', isDark);

            // LocalStorageì— ì €ì¥
            localStorage.setItem(THEME_KEY, theme);
            
            // í…Œë§ˆ ë³€ê²½ ì‹œ íƒ­ UIë„ ì—…ë°ì´íŠ¸ (í•„ìš”í•œ ê²½ìš°)
            // í˜„ì¬ í™œì„±í™”ëœ íƒ­ì„ ì°¾ì•„ì„œ ë‹¤ì‹œ í™œì„±í™”í•˜ì—¬ ìƒ‰ìƒ ì—…ë°ì´íŠ¸
            const currentTab = document.querySelector('.tab-content:not(.hidden)').id.replace('-tab', '');
            if (currentTab) {
                switchTab(currentTab);
            }
        }

        /**
         * í˜„ì¬ í…Œë§ˆë¥¼ ì „í™˜í•©ë‹ˆë‹¤.
         */
        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            applyTheme(newTheme);
        }
        
        /**
         * íƒ­ ì „í™˜ ì²˜ë¦¬
         * @param {string} tabId - 'pin' ë˜ëŠ” 'general'
         */
        function switchTab(tabId) {
            const pinTab = document.getElementById('pin-tab');
            const generalTab = document.getElementById('general-tab');
            const pinBtn = document.getElementById('tab-pin');
            const generalBtn = document.getElementById('tab-general');
            const isDark = document.body.getAttribute('data-theme') === 'dark';

            // ë¹„í™œì„±í™”ëœ ë²„íŠ¼ì˜ í…ìŠ¤íŠ¸ ìƒ‰ìƒì„ í…Œë§ˆì— ë§ê²Œ ì¡°ì •
            const inactiveTextColor = isDark ? 'text-gray-300' : 'text-gray-700';
            const inactiveBgHover = isDark ? 'hover:bg-gray-400/50' : 'hover:bg-gray-200';

            // ëª¨ë“  íƒ­ ë²„íŠ¼ ì´ˆê¸°í™” (í…Œë§ˆì— ë§ëŠ” ë¹„í™œì„±í™” ìŠ¤íƒ€ì¼ ì ìš©)
            [pinBtn, generalBtn].forEach(btn => {
                btn.classList.remove('bg-indigo-600', 'text-white', 'shadow-md');
                // ê¸°ì¡´ í…ìŠ¤íŠ¸ ë° í˜¸ë²„ ìƒ‰ìƒ í´ë˜ìŠ¤ ì œê±° (ê¹”ë”í•œ í…Œë§ˆ ì ìš©ì„ ìœ„í•´)
                btn.className = btn.className.replace(/text-(gray|indigo)-\d{3}/g, ''); 
                btn.className = btn.className.replace(/hover:bg-(gray|indigo)-\d{3}\/\d{2}/g, ''); 
                btn.classList.add(inactiveTextColor, inactiveBgHover);
            });


            if (tabId === 'pin') {
                pinTab.classList.remove('hidden');
                generalTab.classList.add('hidden');
                pinBtn.classList.add('bg-indigo-600', 'text-white', 'shadow-md');
                pinBtn.classList.remove(inactiveTextColor, inactiveBgHover);
            } else if (tabId === 'general') {
                pinTab.classList.add('hidden');
                generalTab.classList.remove('hidden');
                generalBtn.classList.add('bg-indigo-600', 'text-white', 'shadow-md');
                generalBtn.classList.remove(inactiveTextColor, inactiveBgHover);
                // ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸ íƒ­ìœ¼ë¡œ ì „í™˜ ì‹œ ìë™ ìƒì„±
                generatePassword();
            }
        }

        // ----------------- 1. 6ìë¦¬ ìˆ«ì (PIN) ìƒì„± ë¡œì§ -----------------

        function generate6DigitPin() {
            let pin = '';
            // 6ìë¦¬ ìˆ«ìë¥¼ ëœë¤ìœ¼ë¡œ ìƒì„±
            for (let i = 0; i < 6; i++) {
                pin += Math.floor(Math.random() * 10);
            }
            document.getElementById('pin-output').value = pin;
        }

        function copyPin() {
            const pin = document.getElementById('pin-output').value;
            if (pin === '______') {
                showToast('ë¨¼ì € ìƒì„± ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.');
                return;
            }
            copyToClipboard(pin);
        }

        // ----------------- 2. ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸ ìƒì„± ë¡œì§ -----------------
        
        /**
         * í˜„ì¬ í‘œì‹œëœ ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í•©ë‹ˆë‹¤.
         */
        function copyGeneralPassword() {
            const password = document.getElementById('password-output').value;
            
            // ìœ íš¨í•˜ì§€ ì•Šì€ ê¸°ë³¸ê°’ì´ë‚˜ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë³µì‚¬í•˜ì§€ ì•Šë„ë¡ í™•ì¸
            if (password === "ì˜µì…˜ì„ ì„ íƒí•˜ì„¸ìš”!" || password === "P@$$wOrd123!" || !password) {
                 showToast('ë¨¼ì € ìœ íš¨í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.');
                 return;
            }
            
            copyToClipboard(password);
        }

        /**
         * ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ì¸¡ì • ë° UI ì—…ë°ì´íŠ¸
         * @param {string} password - ì¸¡ì •í•  ë¹„ë°€ë²ˆí˜¸
         */
        function updateStrength(password) {
            const strengthBar = document.getElementById('strength-bar');
            const strengthText = document.getElementById('strength-text');

            let score = 0;
            const length = password.length;
            const hasUpper = /[A-Z]/.test(password);
            const hasLower = /[a-z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSymbol = /[!@#$%^&*()_+[\]{}|;:,.<>?]/.test(password);
            
            // ê¸¸ì´ ì ìˆ˜
            if (length >= 8) score += 20;
            if (length >= 12) score += 20;
            if (length >= 16) score += 20;

            // ë¬¸ì ìœ í˜• ì ìˆ˜
            const types = [hasUpper, hasLower, hasNumber, hasSymbol].filter(Boolean).length;
            score += (types * 10);

            // ìµœì¢… ê°•ë„ ë° ìƒ‰ìƒ ê²°ì •
            let strengthLabel = "ë§¤ìš° ì•½í•¨";
            let color = '#ef4444'; // Red (ë§¤ìš° ì•½í•¨)
            let width = Math.min(score, 100);

            if (width >= 80) {
                strengthLabel = "ë§¤ìš° ê°•í•¨";
                color = '#10b981'; // Green (ë§¤ìš° ê°•í•¨)
            } else if (width >= 60) {
                strengthLabel = "ê°•í•¨";
                color = '#3b82f6'; // Blue (ê°•í•¨)
            } else if (width >= 40) {
                strengthLabel = "ë³´í†µ";
                color = '#f59e0b'; // Yellow (ë³´í†µ)
            } else if (width >= 20) {
                strengthLabel = "ì•½í•¨";
                color = '#f97316'; // Orange (ì•½í•¨)
            }

            strengthBar.style.width = `${width}%`;
            strengthBar.style.backgroundColor = color;
            strengthText.textContent = strengthLabel;
            strengthText.style.color = color;
        }


        function generatePassword() {
            const length = parseInt(document.getElementById('length').value, 10);
            const includeUppercase = document.getElementById('include-uppercase').checked;
            const includeLowercase = document.getElementById('include-lowercase').checked;
            const includeNumbers = document.getElementById('include-numbers').checked;
            const includeSymbols = document.getElementById('include-symbols').checked;

            let charSet = '';
            let mustInclude = [];
            let password = '';

            // ì„ íƒëœ ë¬¸ì ìœ í˜•ì— ë”°ë¼ ë¬¸ì ì„¸íŠ¸ ë° í•„ìˆ˜ í¬í•¨ ë¬¸ì ì„¤ì •
            if (includeUppercase) {
                charSet += UPPERCASE_CHARS;
                mustInclude.push(UPPERCASE_CHARS[Math.floor(Math.random() * UPPERCASE_CHARS.length)]);
            }
            if (includeLowercase) {
                charSet += LOWERCASE_CHARS;
                mustInclude.push(LOWERCASE_CHARS[Math.floor(Math.random() * LOWERCASE_CHARS.length)]);
            }
            if (includeNumbers) {
                charSet += NUMBER_CHARS;
                mustInclude.push(NUMBER_CHARS[Math.floor(Math.random() * NUMBER_CHARS.length)]);
            }
            if (includeSymbols) {
                charSet += SYMBOL_CHARS;
                mustInclude.push(SYMBOL_CHARS[Math.floor(Math.random() * SYMBOL_CHARS.length)]);
            }

            // ì•„ë¬´ê²ƒë„ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° ì²˜ë¦¬ (ìµœì†Œí•œì˜ ì•ˆì „ ì¥ì¹˜)
            if (charSet.length === 0) {
                document.getElementById('password-output').value = "ì˜µì…˜ì„ ì„ íƒí•˜ì„¸ìš”!";
                updateStrength("");
                return;
            }

            // 1. í•„ìˆ˜ ë¬¸ìë¥¼ ë¨¼ì € ì¶”ê°€
            password = mustInclude.join('');

            // 2. ë‚˜ë¨¸ì§€ ê¸¸ì´ë§Œí¼ ëœë¤ ë¬¸ìë¥¼ ì¶”ê°€
            const remainingLength = length - mustInclude.length;
            for (let i = 0; i < remainingLength; i++) {
                const randomIndex = Math.floor(Math.random() * charSet.length);
                password += charSet[randomIndex];
            }

            // 3. ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„ì–´ì„œ íŒ¨í„´ì„ ì—†ì• ê³  ìµœì¢… ê¸¸ì´ë¡œ ìë¥´ê¸°
            password = password.split('').sort(() => 0.5 - Math.random()).join('').slice(0, length);
            
            // ê²°ê³¼ ì—…ë°ì´íŠ¸
            document.getElementById('password-output').value = password;
            updateStrength(password);
            
            // ìë™ ë³µì‚¬ëŠ” ì£¼ì„ ì²˜ë¦¬í•˜ê³ , ë³„ë„ ë²„íŠ¼ì„ í†µí•´ ë³µì‚¬í•˜ë„ë¡ ìœ ë„í•©ë‹ˆë‹¤.
            // copyToClipboard(password); 

        }

        // ----------------- ì´ˆê¸° ì‹¤í–‰ -----------------
        window.onload = function() {
            // 1. í…Œë§ˆ ì´ˆê¸°í™” (Local Storage ë˜ëŠ” ì‹œìŠ¤í…œ ê¸°ë³¸ ì„¤ì •ì— ë”°ë¦„)
            let savedTheme = localStorage.getItem(THEME_KEY);
            if (!savedTheme) {
                // ì €ì¥ëœ í…Œë§ˆê°€ ì—†ìœ¼ë©´ ì‹œìŠ¤í…œ ê¸°ë³¸ ì„¤ì •ì„ ë”°ë¦„
                // prefers-color-scheme: light ì´ë©´ 'light' ì•„ë‹ˆë©´ 'dark'
                savedTheme = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
            }
            applyTheme(savedTheme);

            // 2. 6ìë¦¬ ìˆ«ì íƒ­ ì´ˆê¸°í™” ë° ë¹„ë°€ë²ˆí˜¸ ìƒì„±
            generate6DigitPin();
            
            // 3. ì¼ë°˜ ë¹„ë°€ë²ˆí˜¸ íƒ­ì˜ ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸ ìƒì„±
            generatePassword();
            
            // 4. ì´ˆê¸° íƒ­ í™œì„±í™” (PIN íƒ­)
            switchTab('pin');
        };

    </script>

</body>
</html>